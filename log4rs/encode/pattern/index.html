<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="API documentation for the Rust `pattern` mod in crate `log4rs`."><meta name="keywords" content="rust, rustlang, rust-lang, pattern"><title>log4rs::encode::pattern - Rust</title><link rel="stylesheet" type="text/css" href="../../../normalize.css"><link rel="stylesheet" type="text/css" href="../../../rustdoc.css" id="mainThemeStyle"><link rel="stylesheet" type="text/css" href="../../../dark.css"><link rel="stylesheet" type="text/css" href="../../../light.css" id="themeStyle"><script src="../../../storage.js"></script><noscript><link rel="stylesheet" href="../../../noscript.css"></noscript><link rel="shortcut icon" href="../../../favicon.ico"><style type="text/css">#crate-search{background-image:url("../../../down-arrow.svg");}</style></head><body class="rustdoc mod"><!--[if lte IE 8]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="sidebar"><div class="sidebar-menu">&#9776;</div><a href='../../../log4rs/index.html'><img src='../../../rust-logo.png' alt='logo' width='100'></a><p class='location'>Module pattern</p><div class="sidebar-elems"><div class="block items"><ul><li><a href="#structs">Structs</a></li></ul></div><p class='location'><a href='../../index.html'>log4rs</a>::<wbr><a href='../index.html'>encode</a></p><script>window.sidebarCurrent = {name: 'pattern', ty: 'mod', relpath: '../'};</script><script defer src="../sidebar-items.js"></script></div></nav><div class="theme-picker"><button id="theme-picker" aria-label="Pick another theme!"><img src="../../../brush.svg" width="18" alt="Pick another theme!"></button><div id="theme-choices"></div></div><script src="../../../theme.js"></script><nav class="sub"><form class="search-form js-only"><div class="search-container"><div><select id="crate-search"><option value="All crates">All crates</option></select><input class="search-input" name="search" autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"></div><a id="settings-menu" href="../../../settings.html"><img src="../../../wheel.svg" width="18" alt="Change settings"></a></div></form></nav><section id="main" class="content"><h1 class='fqn'><span class='out-of-band'><span id='render-detail'><a id="toggle-all-docs" href="javascript:void(0)" title="collapse all docs">[<span class='inner'>&#x2212;</span>]</a></span><a class='srclink' href='../../../src/log4rs/encode/pattern/mod.rs.html#1-935' title='goto source code'>[src]</a></span><span class='in-band'>Module <a href='../../index.html'>log4rs</a>::<wbr><a href='../index.html'>encode</a>::<wbr><a class="mod" href=''>pattern</a></span></h1><div class='docblock'><p>A simple pattern-based encoder.</p>
<p>Requires the <code>pattern_encoder</code> feature.</p>
<p>The pattern syntax is similar to Rust's string formatting syntax. It
consists of raw text interspersed with format arguments. The grammar is:</p>
<pre><code class="language-not_rust">format_string := &lt;text&gt; [ format &lt;text&gt; ] *
format := '{' formatter [ ':' format_spec ] '}'
formatter := [ name ] [ '(' argument ')' ] *
name := identifier
argument := format_string

format_spec := [ [ fill ] align ] [ min_width ] [ '.' max_width ]
fill := character
align := '&lt;' | '&gt;'
min_width := number
max_width := number
</code></pre>
<h1 id="special-characters" class="section-header"><a href="#special-characters">Special characters</a></h1>
<p>The <code>{</code>, <code>}</code>, <code>(</code>, <code>)</code>, and <code>\</code> characters are part of the pattern syntax;
they must be escaped to appear in output. Like with Rust's string
formatting syntax, type the character twice to escape it. That is, <code>{{</code>
will be rendered as <code>{</code> in output and <code>))</code> will be rendered as <code>)</code>.</p>
<p>In addition, these characters may also be escaped by prefixing them with a
<code>\</code> character. That is, <code>\{</code> will be rendered as <code>{</code>.</p>
<h1 id="formatters" class="section-header"><a href="#formatters">Formatters</a></h1>
<p>A formatter inserts a dynamic portion of text into the pattern. It may be
text derived from a log event or from some other context like the current
time. Formatters may be passed arguments consisting of parenthesized format
strings.</p>
<p>The following formatters are currently supported. Unless otherwise stated,
a formatter does not accept any argument.</p>
<ul>
<li><code>d</code>, <code>date</code> - The current time. By default, the ISO 8601 format is used.
A custom format may be provided in the syntax accepted by <code>chrono</code>.
The timezone defaults to local, but can be specified explicitly by
passing a second argument of <code>utc</code> for UTC or <code>local</code> for local time.
<ul>
<li><code>{d}</code> - <code>2016-03-20T14:22:20.644420340-08:00</code></li>
<li><code>{d(%Y-%m-%d %H:%M:%S)}</code> - <code>2016-03-20 14:22:20</code></li>
<li><code>{d(%Y-%m-%d %H:%M:%S %Z)(utc)}</code> - <code>2016-03-20 22:22:20 UTC</code></li>
</ul>
</li>
<li><code>f</code>, <code>file</code> - The source file that the log message came from, or <code>???</code> if
not provided.</li>
<li><code>h</code>, <code>highlight</code> - Styles its argument according to the log level. The
style is intense red for errors, red for warnings, blue for info, and
the default style for all other levels.
<ul>
<li><code>{h(the level is {l})}</code> -
<code style="color: red; font-weight: bold">the level is ERROR</code></li>
</ul>
</li>
<li><code>l``, level</code> - The log level.</li>
<li><code>L</code>, <code>line</code> - The line that the log message came from, or <code>???</code> if not
provided.</li>
<li><code>m</code>, <code>message</code> - The log message.</li>
<li><code>M</code>, <code>module</code> - The module that the log message came from, or <code>???</code> if not
provided.</li>
<li><code>n</code> - A platform-specific newline.</li>
<li><code>t</code>, <code>target</code> - The target of the log message.</li>
<li><code>T</code>, <code>thread</code> - The name of the current thread.</li>
<li><code>I</code>, <code>thread_id</code> - The ID of the current thread.</li>
<li><code>X</code>, <code>mdc</code> - A value from the <a href="https://crates.io/crates/log-mdc">MDC</a>. The first argument specifies
the key, and the second argument specifies the default value if the
key is not present in the MDC. The second argument is optional, and
defaults to the empty string.
<ul>
<li><code>{X(user_id)}</code> - <code>123e4567-e89b-12d3-a456-426655440000</code></li>
<li><code>{X(nonexistent_key)(no mapping)}</code> - <code>no mapping</code></li>
</ul>
</li>
<li>An &quot;unnamed&quot; formatter simply formats its argument, applying the format
specification.
<ul>
<li><code>{({l} {m})}</code> - <code>INFO hello</code></li>
</ul>
</li>
</ul>
<h1 id="format-specification" class="section-header"><a href="#format-specification">Format Specification</a></h1>
<p>The format specification determines how the output of a formatter is
adjusted before being returned.</p>
<h2 id="fillalignment" class="section-header"><a href="#fillalignment">Fill/Alignment</a></h2>
<p>The fill and alignment values are used in conjunction with a minimum width
value (see below) to control the behavior when a formatter's output is less
than the minimum. While the default behavior is to pad the output to the
right with space characters (i.e. left align it), the fill value specifies
the character used, and the alignment value is one of:</p>
<ul>
<li><code>&lt;</code> - Left align by appending the fill character to the formatter output</li>
<li><code>&gt;</code> - Right align by prepending the fill character to the formatter
output.</li>
</ul>
<h2 id="width" class="section-header"><a href="#width">Width</a></h2>
<p>By default, the full contents of a formatter's output will be inserted into
the pattern output, but both the minimum and maximum lengths can be
configured. Any output over the maximum length will be truncated, and
output under the minimum length will be padded (see above).</p>
<h1 id="examples" class="section-header"><a href="#examples">Examples</a></h1>
<p>The default pattern is <code>{d} {l} {t} - {m}{n}</code> which produces output like
<code>2016-03-20T22:22:20.644420340+00:00 INFO module::path - this is a log message</code>.</p>
<p>The pattern <code>{m:&gt;10.15}</code> will right-align the log message to a minimum of
10 bytes, filling in with space characters, and truncate output after 15
bytes. The message <code>hello</code> will therefore be displayed as
<code>     hello</code>, while the message <code>hello there, world!</code> will be
displayed as <code>hello there, wo</code>.</p>
<p>The pattern <code>{({l} {m}):15.15}</code> will output the log level and message
limited to exactly 15 bytes, padding with space characters on the right if
necessary. The message <code>hello</code> and log level <code>INFO</code> will be displayed as
<code>INFO hello     </code>, while the message <code>hello, world!</code> and log
level <code>DEBUG</code> will be truncated to <code>DEBUG hello, wo</code>.</p>
</div><h2 id='structs' class='section-header'><a href="#structs">Structs</a></h2>
<table><tr class='module-item'><td><a class="struct" href="struct.PatternEncoder.html" title='log4rs::encode::pattern::PatternEncoder struct'>PatternEncoder</a></td><td class='docblock-short'><p>An <code>Encode</code>r configured via a format string.</p>
</td></tr><tr class='module-item'><td><a class="struct" href="struct.PatternEncoderConfig.html" title='log4rs::encode::pattern::PatternEncoderConfig struct'>PatternEncoderConfig</a></td><td class='docblock-short'><p>The pattern encoder's configuration.</p>
</td></tr><tr class='module-item'><td><a class="struct" href="struct.PatternEncoderDeserializer.html" title='log4rs::encode::pattern::PatternEncoderDeserializer struct'>PatternEncoderDeserializer</a></td><td class='docblock-short'><p>A deserializer for the <code>PatternEncoder</code>.</p>
</td></tr></table></section><section id="search" class="content hidden"></section><section class="footer"></section><aside id="help" class="hidden"><div><h1 class="hidden">Help</h1><div class="shortcuts"><h2>Keyboard Shortcuts</h2><dl><dt><kbd>?</kbd></dt><dd>Show this help dialog</dd><dt><kbd>S</kbd></dt><dd>Focus the search field</dd><dt><kbd>↑</kbd></dt><dd>Move up in search results</dd><dt><kbd>↓</kbd></dt><dd>Move down in search results</dd><dt><kbd>↹</kbd></dt><dd>Switch tab</dd><dt><kbd>&#9166;</kbd></dt><dd>Go to active search result</dd><dt><kbd>+</kbd></dt><dd>Expand all sections</dd><dt><kbd>-</kbd></dt><dd>Collapse all sections</dd></dl></div><div class="infos"><h2>Search Tricks</h2><p>Prefix searches with a type followed by a colon (e.g., <code>fn:</code>) to restrict the search to a given type.</p><p>Accepted types are: <code>fn</code>, <code>mod</code>, <code>struct</code>, <code>enum</code>, <code>trait</code>, <code>type</code>, <code>macro</code>, and <code>const</code>.</p><p>Search functions by type signature (e.g., <code>vec -> usize</code> or <code>* -> vec</code>)</p><p>Search multiple things at once by splitting your query with comma (e.g., <code>str,u8</code> or <code>String,struct:Vec,test</code>)</p></div></div></aside><script>window.rootPath = "../../../";window.currentCrate = "log4rs";</script><script src="../../../aliases.js"></script><script src="../../../main.js"></script><script defer src="../../../search-index.js"></script></body></html>